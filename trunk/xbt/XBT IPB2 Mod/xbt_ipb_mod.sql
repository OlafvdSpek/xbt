alter table ibf_attachments add bt_info_hash blob;
alter table ibf_attachments add bt_name varchar(255);
alter table ibf_attachments add bt_size bigint;
alter table ibf_attachments add bt_tracker varchar(255);
alter table ibf_topics add bt_info_hash blob;
insert into ibf_attachments_type (atype_extension, atype_mimetype, atype_img) values ('torrent', 'application/x-bittorrent', 'folder_mime_types/zip.gif');
update ibf_skin_templates set section_content = '<!-- Begin Topic Entry {$data[''tid'']} --><tr> <td align="center" class="$class2">{$data[''folder_img'']}</td><td align="center" class="$class2">{$data[''topic_icon'']}</td><td class="$class2" valign="middle"><div>{$data[''go_new_post'']}{$data[''prefix'']} {$data[''attach_img'']}<a href="{ipb.script_url}showtopic={$data[''tid'']}" title="{ipb.lang[''topic_started_on'']} {$data[''start_date'']}">{$data[''title'']}</a> {$data[PAGES]}<div class="desc">{$data[''description'']}</div></div></td>    <td align="center" class="$class1">{$data[''seeders'']}</td>    <td align="center" class="$class1">{$data[''leechers'']}</td><td align=''center'' class="$classposts">     {$data[''posts'']}<if="data[''_hasqueued''] and inforum == 1">&nbsp;<a href="{ipb.script_url}showtopic={$data[''tid'']}&amp;modfilter=invisible_posts"><{BC_QUEUED_POSTS}></a></if>    </td><td align="center" class="$class1">{$data[''starter'']}</td><td align="center" class="$class1">{$data[''views'']}</td><td class="$class1"><span class="lastaction">{$data[''last_post'']}<br /><a href="{ipb.script_url}showtopic={$data[''tid'']}&amp;view=getlastpost">{$data[''last_text'']}</a> <b>{$data[''last_poster'']}</b></span></td><if="ipb.member[''is_mod''] and inforum == 1 and data[''tidon''] == 1"><td align="center" class="$class1"><a href="#" title="{ipb.lang[''click_for_mod'']}" onclick="forum_toggle_tid(''{$data[''real_tid'']}''); return false;"><img name="img{$data[''real_tid'']}" src="{ipb.vars[''img_url'']}/topic_selected.gif" /></a></td></if><if="ipb.member[''is_mod''] and inforum == 1 and data[''tidon''] == 0"><td align="center" class="$class1"><a href="#" title="{ipb.lang[''click_for_mod'']}" onclick="forum_toggle_tid(''{$data[''real_tid'']}''); return false;"><img name="img{$data[''real_tid'']}" src="{ipb.vars[''img_url'']}/topic_unselected.gif" /></a></td></if></tr>    <!-- End Topic Entry {$data[''tid'']} -->' where group_name = 'skin_forum' and func_name = 'render_forum_row';
update ibf_skin_templates set section_content = '<script language="javascript" type="text/javascript"><!--var unselectedbutton = "{ipb.vars[''img_url'']}/topic_unselected.gif";var selectedbutton   = "{ipb.vars[''img_url'']}/topic_selected.gif";var lang_gobutton    = "{ipb.lang[''f_go'']}";var lang_suredelete  = "{ipb.lang[''cp_js_delete'']}";//--></script><script type="text/javascript" src="jscripts/ipb_forum.js"></script>   <!--IBF.SUBFORUMS--><table cellspacing="0"><tr><td style=''padding-left:0px'' width="60%">{$data[''SHOW_PAGES'']}</td><td class=''nopad'' style=''padding:0px 0px 5px 0px'' align="right" nowrap="nowrap"><a href="{ipb.script_url}act=Post&amp;CODE=00&amp;f={$data[''id'']}"><{A_POST}></a>{$data[POLL_BUTTON]}</td></tr></table><div class="borderwrap"><div class="maintitle"><p class="expand"><a href="{ipb.script_url}act=Login&amp;CODE=04&amp;f={$data[''id'']}">{ipb.lang[''mark_as_read'']}</a> &middot; <a href="{ipb.script_url}act=Track&amp;f={$data[''id'']}&amp;type=forum">{ipb.lang[''ft_title'']}</a></p><p><{CAT_IMG}>&nbsp;{$data[''name'']}</p></div><table cellspacing="1"><tr> <th align="center">&nbsp;</th><th align="center">&nbsp;</th><th width="50%" nowrap="nowrap">{ipb.lang[''h_topic_title'']}</th><th align="center" nowrap="nowrap">S</th><th align="center" nowrap="nowrap">L</th><th align="center" nowrap="nowrap">R</th><th width="14%" align="center" nowrap="nowrap">{ipb.lang[''h_topic_starter'']}</th><th width="7%" align="center" nowrap="nowrap">{ipb.lang[''h_hits'']}</th><th width="22%" nowrap="nowrap">{ipb.lang[''h_last_action'']}</th><if="ipb.member[''is_mod'']"><th width="1%" align="center">&nbsp;</th></if></tr><!-- Forum page unique top --><!--IBF.ANNOUNCEMENTS-->' where group_name = 'skin_forum' and func_name = 'pagetop';
update ibf_skin_templates set section_content = '<tr><td colspan="10" class="darkrow1"><table cellspacing="0"><tr><td width="50%" class="nopad"><form action="{ipb.script_url}" method="post" name="search"><input type="hidden" name="forums" value="{$data[''id'']}" /><input type="hidden" name="cat_forum" value="forum" /><input type="hidden" name="act" value="Search" /><input type="hidden" name="joinname" value="1" /><input type="hidden" name="CODE" value="01" /><input type="text" size="30" name="keywords" value="{ipb.lang[''enter_keywords'']}" onfocus="this.value = '''';" /> <input type="submit" value="{ipb.lang[''search_forum'']}" class="button" /></form></td><if="ipb.member[''is_mod'']"><td width="50%" align="right" nowrap="nowrap" class="nopad"><form name="modform" method="post" action="{ipb.script_url}act=mod&CODE=topicchoice&f={$data[''id'']}" onsubmit="return checkdelete();"><input type="hidden" name="act" value="mod" /><input type="hidden" name="auth_key" value="{$auth_key}" /><input type="hidden" name="modfilter" value="{ipb.input[''modfilter'']}" /><input type="hidden" value="{ipb.input[''selectedtids'']}" name="selectedtids"" /><select name="tact"><option value="close">{ipb.lang[''cpt_close'']}</option><option value="open">{ipb.lang[''cpt_open'']}</option><option value="pin">{ipb.lang[''cpt_pin'']}</option><option value="unpin">{ipb.lang[''cpt_unpin'']}</option><option value="move">{ipb.lang[''cpt_move'']}</option><option value="merge">{ipb.lang[''cpt_merge'']}</option><option value="delete">{ipb.lang[''cpt_delete'']}</option><option value="approve">{ipb.lang[''cpt_approve'']}</option><option value="unapprove">{ipb.lang[''cpt_unapprove'']}</option><!--IBF.MMOD--></select>&nbsp;<input type="submit" name="gobutton" value="{ipb.lang[''f_go'']}" class="button" /></form></td></if></tr></table></td></tr><tr> <td class="catend" colspan="8"><!-- no content --></td></tr></table></div><table cellspacing="0"><tr><td style=''padding-left:0px'' width="50%" nowrap="nowrap">{$data[''SHOW_PAGES'']}</td><td class=''nopad'' style=''padding:5px 0px 5px 0px'' align="right" width="50%"><a href="{ipb.script_url}act=Post&amp;CODE=00&amp;f={$data[''id'']}"><{A_POST}></a>{$data[POLL_BUTTON]}</td></tr></table><!--IBF.FORUM_ACTIVE--><div class="activeusers"><div class="row2"><table cellspacing="0"><tr><td width="5%" nowrap="nowrap"><{B_NEW}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_open_new'']}</span><br /><{B_NORM}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_open_no'']}</span><br /><{B_HOT}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_hot_new'']}</span><br /><{B_HOT_NN}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_hot_no'']}</span>&nbsp;</td><td width="5%" nowrap="nowrap"><{B_POLL}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_poll'']}</span><br /><{B_POLL_NN}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_poll_no'']}</span><br /><{B_LOCKED}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_locked'']}</span><br /><{B_MOVED}>&nbsp;&nbsp;<span class="desc">{ipb.lang[''pm_moved'']}</span></td><td align="right" width="90%">{$data[FORUM_JUMP]}<br /><br /><form action="{ipb.script_url}act=SF&amp;f={$data[''id'']}&amp;st={ipb.input[''st'']}" method="post"><select name="sort_key">{$ibforums->show[''sort_by'']}</select><select name="sort_by">{$ibforums->show[''sort_order'']}</select><select name="prune_day">{$ibforums->show[''sort_prune'']}</select><select name="topicfilter">{$ibforums->show[''topic_filter'']}</select><input type="submit" value="{ipb.lang[''sort_submit'']}" class="button" /></form></td></tr></table></div></div><if="ipb.member[''is_mod'']"><br /><div align="center"><a href="{ipb.script_url}showforum={$data[''id'']}&amp;modfilter=invisible_topics">{ipb.lang[''mod_showallinvisible'']}</a>&middot;<a href="{ipb.script_url}showforum={$data[''id'']}&amp;modfilter=invisible_posts">{ipb.lang[''mod_showallposts'']}</a>&middot;<a href="{ipb.script_url}act=mod&amp;CODE=resync&amp;f={$data[''id'']}&amp;auth_key={$auth_key}">{ipb.lang[''mod_resync'']}</a>&middot;<a href="javascript:PopUp(''{ipb.script_url}act=mod&amp;CODE=prune_start&amp;f={$data[''id'']}&amp;auth_key={$auth_key}'', ''PRUNE'', 600,500)">{ipb.lang[''mod_prune'']}</a></div></if><br clear="all" />' where group_name = 'skin_forum' and func_name = 'tableend';
update ibf_skin_templates set section_content = '<a href="{ipb.script_url}act=Attach&amp;type={$data[''method'']}&amp;id={$data[''id'']}" title="{ipb.lang[''attach_dl'']}" target="_blank"><img src="{ipb.vars[''mime_img'']}/{$data[''image'']}" alt="{ipb.lang[''attached_file'']}" /></a>&nbsp;<a href="{ipb.script_url}act=Attach&amp;type={$data[''method'']}&amp;id={$data[''id'']}" title="{ipb.lang[''attach_dl'']}" target="_blank">{$data[''name'']}</a> ( {$data[''size'']} )<span class="desc">{ipb.lang[''attach_hits'']}: {$data[''hits'']}</span> Seeders: {$data[''seeders'']} Leechers: {$data[''leechers'']}<br />' where group_name = 'skin_topic' and func_name = 'show_attachments';
